<div class="close" (click)="dismissModal()"></div>
<div class="inner">
  <div class="row title center-align">
    Add Inventory Item
    <button (click)="saveAdded()" class="uptracker-form-btn white-text tealish waves-effect waves-light right" [disabled] = '!items.length'>
      <fa name="check"></fa>
      Save
    </button>
  </div>
  <div class="row">
    <div *ngIf="addCustomProduct" class="col s6">
      <div class="custom-product-add">
        <div class="row">
          <div class="col s6 title">
            Add Custom Product
          </div>
          <div class="col s6 buttons right-align">
            <button class="uptracker-form-btn  redbtn waves-effect waves-light" (click)="toggleCustomAdd()">
              Cancel
            </button>
            <button class="uptracker-form-btn   white-text waves-effect waves-light" (click)="addNewProduct()">
              <fa name="plus"></fa>
              Add
            </button>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <div class="ttl">Name</div>
            <div class="input">
              <input [(ngModel)]="newProductData.name" type="text" placeholder="Product Name">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <div class="ttl">Vendor</div>
            <div class="input">
              <input [(ngModel)]="newProductData.vendor.properties.name"  type="text" placeholder="Vendor Name">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <div class="ttl">Outer Package</div>
            <div class="select select-light">
              <select title="Package" [(ngModel)]="newProductData.package_type" materialize="material_select">
                <option *ngFor="let outerPackage of inventoryService.outerPackageList" value="{{ outerPackage }}">{{outerPackage}}</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <div class="ttl">Inner Package</div>
            <div class="row">
              <div class="col s4">
                <div class="input">
                  <input [(ngModel)]="newProductData.sub_package.properties.qty" type="text" placeholder="Qty">
                </div>
              </div>
              <div class="col s8">
                <div class="select select-light">
                  <select title="Package" [(ngModel)]="newProductData.sub_package.properties.unit_type" materialize="material_select">
                    <option *ngFor="let innerPackage of inventoryService.innerPackageList" value="{{ innerPackage }}">{{innerPackage}}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <div class="ttl">Consumable Unit</div>
            <div class="row">
              <div class="col s4">
                <div class="input">
                  <input [(ngModel)]="newProductData.consumable_unit.properties.qty" type="text" placeholder="Qty">
                </div>
              </div>
              <div class="col s8">
                <div class="select select-light">
                  <select title="Package" [(ngModel)]="newProductData.consumable_unit.properties.unit_type" materialize="material_select">
                    <option *ngFor="let consumablePackage of inventoryService.consumablePackageList" value="{{ consumablePackage }}">{{consumablePackage}}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  <div *ngIf="!addCustomProduct" class="col s6">
    <div class="row ttl">
      <div class="col s12 ">Search Products</div>
    </div>
    <div class="row">
      <div class="col s12 input search">
        <input (input)="onSearchTypeIn($event)" type="text" placeholder="Enter Product Name, UPC, or Catalog #">
        <a>
          <fa name="barcode"></fa>
        </a>
      </div>
    </div>
    <div *ngIf="total" class="row border-bottom custom-pdg-btm">
      <div class="col s12 ">
        <!--<div class="input-checkbox checkbox inline-block">-->
          <!--<input [(ngModel)]="checkBoxCandidates" (change)="selectAllCandidates()" id="variantsAll" type="checkbox">-->
          <!--<label for="variantsAll"></label>-->
        <!--</div>-->
        <!--<span class="bold">Matching Products</span>-->
        <div (click)="bulkAdd()" class="right tealish-text bulk-actions">
          <fa name="plus"></fa>
          Add Selected
        </div>
      </div>
    </div>
    <div
      *ngFor="let item of (resultItems$ | async); let i=index;"
      class="row search-results" [class.warning]="item.notActive">
      <div class="col s9 product-row-fields">
        <div class="input-checkbox  checkbox" *ngIf="!item.notActive">
          <input [ngModel]="item.checked" id="variant{{ i }}" type="checkbox" (click)="putCheckbox(item)">
          <label for="variant{{ i }}"></label>
        </div>
        <div class="image" *ngIf="(item.images && item.images[0])"
          [ngStyle]="{'background-image':'url(\''+item.images[0]+'\')'}">
        </div>
        <div class="image no-image" *ngIf="(!item.images || !item.images[0])"
          [ngStyle]="{'background-image':'url(/assets/img/onboard/icon-onboarding-products.svg)'}">
        </div>
        <div>
          <div class="product-name tealish-text">
            {{ item.name }}
          </div>
          <div class="vendor-name">
            <span *ngFor="let vendor of item.vendors" class="vendor">{{ vendor }}<span>,</span> </span>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
      <!--<div class="col s3 right-align item-price">-->
        <!--${{ item.price/100 | number : '1.2-2' }}-->
      <!--</div>-->
      <div (click)="addToInventory([item])" class="action-button waves-light waves-effect" *ngIf="!item.notActive">
        <fa name="plus"></fa>
      </div>
      <div class="clearfix"></div>
    </div>
    <div class="row">
      <div class="col s12">
        <div class="no_results_container" [class.not_hidden]="!total">
          <div class="img">
            <i class="fa fa-question" aria-hidden="true"></i>
          </div>
          <div class="text">No Products Found</div>
          <div class="sub-buttons">
            <button (click)="toggleCustomAdd()"
              class="uptracker-form-btn waves-effect waves-light tealish white-text">
              <fa name="plus"></fa>
              Add Custom Product
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="col s6">
    <div class="row custom-width ttl">
      <div class="col s1 ">Package</div>
      <div class="col s1 ">Sub-Package</div>
      <div class="col s1 "></div>
      <div class="col s1 ">Consumable unit</div>
      <div class="col s1 "></div>

    </div>
    <div class="row custom-width">
      <div class="col s1 select select-light custom-select">
        <select materialize="material_select" class="customSelect1"
          (ngModelChange)="checkPackage($event)"
          [ngModel]="newInventoryPackage.package_type"
          [materializeSelectOptions]="inventoryService.outerPackageList"
          *ngIf="showSelect"
        >
          <option value="" [disabled] = 'items.length || checkedProduct.length'>N/A</option>
          <option *ngFor="let outerPackage of outerPackageList" [ngValue]="outerPackage">{{outerPackage}}</option>
        </select>
      </div>
      <div class="col s1 input">
        <input placeholder="Qty" type="text" [(ngModel)]="newInventoryPackage.sub_package_qty">
      </div>
      <div class="col s1 select select-light custom-select">
        <select materialize="material_select"
          (ngModelChange)="checkSubPackage($event)"
          [ngModel]="newInventoryPackage.sub_package_type"
          [materializeSelectOptions]="inventoryService.innerPackageList">
          <option value="" [disabled] = 'items.length || checkedProduct.length'>N/A</option>
          <option *ngFor="let innerPackage of innerPackageList" value="{{ innerPackage }}">{{innerPackage}}</option>
        </select>
      </div>
      <div class="col s1 input">
        <input placeholder="Qty" type="text" [(ngModel)]="newInventoryPackage.consumable_unit_qty">
      </div>
      <div class="col s1 select select-light custom-select">
        <select materialize="material_select"
          (ngModelChange)="checkConsPackage($event)"
          [ngModel]="newInventoryPackage.consumable_unit_type"
          [materializeSelectOptions]="inventoryService.consumablePackageList">
          <option value="" [disabled] = 'items.length || checkedProduct.length'>N/A</option>
          <option *ngFor="let consumablePackage of consumablePackageList" value="{{ consumablePackage }}">{{consumablePackage}}</option>
        </select>
      </div>
    </div>
    <div class="row border-bottom">
      <div class="col s12 low-padding">
        <div class="input-checkbox checkbox inline-block">
          <input (change)="selectAllItems()" [(ngModel)]="checkBoxItems" id="chkAll" type="checkbox">
          <label for="chkAll"></label>
        </div>
        <span class="bold">Selected Products</span>
        <div (click)="bulkDelete()" class="right tealish-text bulk-actions">
          <fa name="minus"></fa>
          Remove Selected
        </div>
      </div>
    </div>

    <div
      *ngFor="let item of (items$ | async); let i=index;"
      class="row added-items">
      <div class="col s9 product-row-fields low-padding">
        <div class="input-checkbox  checkbox">
          <input [(ngModel)]="item.checked" id="addeditem{{ i }}" type="checkbox">
          <label for="addeditem{{ i }}"></label>
        </div>
        <div class="image" *ngIf="(item.images && item.images[0])"
          [ngStyle]="{'background-image':'url(\''+item.images[0]+'\')'}">
        </div>
        <div class="image no-image" *ngIf="(!item.images || !item.images[0])"
          [ngStyle]="{'background-image':'url(/assets/img/onboard/icon-onboarding-products.svg)'}">
        </div>
        <div>
          <div class="product-name tealish-text">
            {{ item?.name }}
          </div>
          <div class="vendor-name">
            <span *ngFor="let vendor of item.vendors" class="vendor">{{ vendor }}<span>,</span> </span>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
      <!--<div class="col s3 right-align low-padding item-price">-->
        <!--${{ item.price/100 | number : '1.2-2' }}-->
      <!--</div>-->
      <div (click)="deleteFromInventory([item])" class="action-button">
        <fa name="minus"></fa>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>
</div>
</div>
