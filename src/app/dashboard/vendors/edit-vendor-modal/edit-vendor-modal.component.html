<div class="close" (click)="closeModal()"></div>
<div class="title center-align">Vendor Info</div>
<form class="uptracker-form" materialize (ngSubmit)="onSubmit()" #vendorForm="ngForm" autocomplete="off" novalidate>
  <div class="input row">
    <div class="col s12 m4">
      <div class="label left-align">Currency</div>
      <div class="select" [class.dirty]="currencyDirty">
        <select
            [(ngModel)]="vendor.currency"
            name="currency"
            #currency="ngModel"
            materialize="material_select"
            required
            (change)="changeCurrency($event)"
            [materializeSelectOptions]="currency$">
          <option value="">Please select one</option>
          <option *ngFor="let currency of currency$ | async" [value]="currency.iso_code">{{currency.name}}</option>
        </select>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="label left-align">Default Order Type</div>
      <div class="select">
        <select
            [(ngModel)]="vendor.default_order_type"
            name="order_type"
            #order_type="ngModel"
            materialize="material_select"
            required>
          <option value="email">Email</option>
          <option value="phone">Phone</option>
          <option value="fax">Fax</option>
        </select>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="label left-align">Payment Method</div>
      <div class="select">
        <select
            [(ngModel)]="vendor.payment_method"
            name="method"
            #method="ngModel"
            materialize="material_select"
            required>
          <option value="check">Check</option>
          <option value="credit">Credit card</option>
        </select>
      </div>
    </div>
  </div>
  <div class="input row">
    <div class="col s12 m4">
      <div class="label left-align">Discount</div>
      <div class="suffix-input">
        <div class="suffix">%</div>
        <input
            id="discount"
            placeholder="Enter Value"
            class="validate col s12"
            [(ngModel)]="vendor.discount"
            [textMask]="{mask: discountMask, guide: false}"
            name="discount"
            #discount="ngModel"
            required
            type="text">
        <div [hidden]="discount.valid || discount.pristine" class="error red-text left-align">
          Discount is required.
        </div>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="label">Shipping & Handling Fee</div>
      <div class="prefix-input">
        <div class="prefix" [innerHTML]="currencySign"></div>
        <input
            id="shipping"
            class="validate col s12"
            placeholder="Enter Value"
            [(ngModel)]="vendor.shipping_handling"
            [textMask]="{mask: amountMask, guide: false}"
            name="shipping"
            #shipping="ngModel"
            required
            type="text">
      </div>
      <div [hidden]="shipping.valid || shipping.pristine" class="error red-text left-align">
        Shipping & Handling Fee is required.
      </div>
    </div>
    <div class="col s12 m4">
      <div class="label left-align">Average Lead Time</div>
      <input
          id="lead_time"
          placeholder="Enter Value"
          class="validate col s12"
          [(ngModel)]="vendor.avg_lead_time"
          name="lead_time"
          #lead_time="ngModel"
          required
          type="text">
      <div [hidden]="lead_time.valid || lead_time.pristine" class="error red-text left-align">
        Average Lead Time is required.
      </div>
    </div>
  </div>
  <div class="upload row">
    <div class="col s12 m6">
      <div class="label left-align">Priority</div>
      <div class="tip">Select how important this vendor is to you.</div>
      <div class="range-field">
        <input
            type="range"
            min="1" max="10" step="1"
            [(ngModel)]="vendor.priority"
            name="priority"
            (input)="changePriority($event)"
            #priority="ngModel">
        <div class="value" [ngStyle]="{ 'left': priorityMargin }">{{vendor.priority}}</div>
      </div>
    </div>
    <div class="col s12 m6">
      <div class="col s7">
        <div class="img-container"
             fileDrop
             [ngClass]="{'file-is-over': fileIsOver}"
             [options]="options"
             (fileOver)="fileOver($event)"
             (onFileDrop)="onFileDrop($event)">
          <!--<div class="img" *ngIf="false" [ngStyle]="{ 'background-image': 'url()' }"></div>-->
        </div>
      </div>
      <div class="col s5">
        <div class="text">
          <div class="label">Documents</div>
          <div class="tip">Please upload here</div>
          <!--<div class="file-field">-->
            <!--<div class="upload-link">-->
              <!--<input type="file" accept="image/*" (change)="changeListener($event)" />-->
              <!--<a>Upload a photo</a>-->
            <!--</div>-->
          <!--</div>-->
        </div>
      </div>
    </div>
  </div>
  <div class="input row">
    <div class="col s12 m8">
      <div class="label left-align">Rep Name</div>
      <input
          id="name"
          placeholder="Enter full name"
          class="validate col s12"
          [(ngModel)]="vendor.rep_name"
          name="name"
          #name="ngModel"
          required
          type="text">
      <div [hidden]="name.valid || name.pristine" class="error red-text left-align">
        Rep Name is required.
      </div>
    </div>
    <div class="col s12 m4">
      <div class="label left-align">Rep Email</div>
      <input
          id="email"
          class="validate col s12"
          placeholder="username@email.com"
          [(ngModel)]="vendor.rep_email"
          name="email"
          #email="ngModel"
          required minlength="6" maxlength="254" pattern=".+@.+\..+"
          type="text">
      <div [hidden]="email.valid || email.pristine" class="error red-text left-align">
        Your email must be from 6 to 254 characters long and look like an e-mail address.
      </div>
    </div>
  </div>
  <div class="input row">
    <div class="col s12 m4">
      <div class="label left-align">Rep Office Phone</div>
      <phone-input
          (onCountryChange)="onCountryChange($event)"
          [selectedCountry]="selectedCountry">
        <input
            [textMask]="phoneMask"
            id="phone"
            placeholder="Enter phone number"
            class="validate col s12"
            [(ngModel)]="vendorFormPhone"
            name="phone"
            #phone="ngModel"
            required
            minlength="11"
            type="text">
        <div [hidden]="phone.valid || phone.pristine" class="error red-text left-align">
          Rep Office Phone number required.
        </div>
      </phone-input>
    </div>
    <div class="col s12 m4">
      <div class="label left-align">Rep Office Phone</div>
      <phone-input
          (onCountryChange)="onCountryChange2($event)"
          [selectedCountry]="selectedCountry2">
        <input
            [textMask]="phoneMask"
            id="phone2"
            placeholder="Enter phone number"
            class="validate col s12"
            [(ngModel)]="vendorFormPhone2"
            name="phone2"
            #phone2="ngModel"
            required
            minlength="11"
            type="text">
        <div [hidden]="phone2.valid || phone2.pristine" class="error red-text left-align">
          Rep Office Phone number required.
        </div>
      </phone-input>
    </div>
    <div class="col s12 m4">
      <div class="label left-align">Rep Fax</div>
      <phone-input
          (onCountryChange)="onFaxCountryChange($event)"
          [selectedCountry]="selectedFaxCountry">
        <input
            [textMask]="phoneMask"
            id="fax"
            placeholder="Enter fax number"
            class="validate col s12"
            [(ngModel)]="vendorFormFax"
            name="fax"
            #fax="ngModel"
            type="text">
      </phone-input>
    </div>
  </div>

  <div class="input row textarea-row">
    <div class="col s12">
      <div class="label left-align">Notes</div>
      <div class="textarea">
        <textarea
            class="validate materialize-textarea col s12"
            [(ngModel)]="vendor.notes"
            name="notes"
            #notes="ngModel">
        </textarea>
      </div>
    </div>
  </div>

  <div class="buttons center-align">
    <button
        type="submit"
        class="btn white-text waves-effect waves-light"
        [class.disabled]="!vendorForm.form.valid"
        [disabled]="!vendorForm.form.valid">
      Save
    </button>
  </div>
</form>
