<form class="uptracker-form" (ngSubmit)="saveReconcile()" materialize #reconcileProductForm="ngForm" autocomplete="off" novalidate>
  <div class="top">
    <div class="row filter clearfix">
      <div class="col l3 m6 title">
        <span class="main-title">Reconcile Invoice</span>
      </div>
      <div class="col l3 m6">
        <div class="select">
          <select
            class="wide"
            materialize="material_select"
            [materializeSelectOptions]=""
            name="vendor"
          >
            <option value="">#KOM-123456789</option>
            <option value="">#KOM-123456789</option>
            <option value="">#KOM-123456789</option>
          </select>
        </div>
      </div>
    </div>

    <div class="invoice">
      <div class="row bottom-border">
        <div class="col l6 left">
          <div class="row"><span>Invoice Date</span></div>
          <div class="row date-picker">
            <input type="text" name="daterangeInput" daterangepicker [options]="dateOptions" (selected)="OnDate($event, daterange)" />
            <div class="calendar">
              <img src="/assets/img/icon-calendar.png" alt="" />
            </div>
          </div>
          <div class="row"><span>Currency</span></div>
          <div class="row">
            <div class="currency">
              <span>$1.00</span>
              <div class="select">
                <select
                  class="wide"
                  materialize="material_select"
                  [materializeSelectOptions]=""
                  name="currency"
                >
                  <option value="">USD</option>
                  <option value="">USD</option>
                  <option value="">USD</option>
                </select>
              </div>
            </div>
          </div>
          <div class="row"><span>Exchange rate</span></div>
        </div>
        <div class="col l6 right">
          <div class="row">
            <div class="item">
              <span>Calculated Sub-Total</span>
              <div class="input-calculated">
                $250.00
              </div>
            </div>
          </div>
          <div class="row">
            <div class="item">
              <span>Invoiced Sub-Total</span>
              <div>
                <div class="input">
                  <input
                    type="text"
                    name="subTotal"
                    placeholder="$200.00"
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="item">
              <span>Invoiced Credit</span>
              <div>
                <div class="input">
                  <input
                    type="text"
                    name="invoicedCredit"
                    placeholder="$5.00"
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="item">
              <span>Shipping</span>
              <div>
                <div class="input">
                  <input
                    type="text"
                    name="shipping"
                    placeholder="$20.00"
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="item">
              <span>Handling</span>
              <div>
                <div class="input">
                  <input
                    type="text"
                    name="handling"
                    placeholder="$5.00"
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="item">
              <span>Taxes</span>
              <div class="input-taxes">
                <span>$1.00</span>
                <div class="plus">
                  <fa name="plus"></fa>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="item">
              <span>P.O. Discount</span>
              <div class="input-discount">
                <span>$1.00</span>
                <div class="select">
                  <select
                    class="wide"
                    materialize="material_select"
                    [materializeSelectOptions]=""
                    name="currency"
                  >
                    <option value="">%</option>
                    <option value="">%</option>
                    <option value="">%</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col l6 left">
          <button
            type="submit"
            class="uptracker-form-btn no-min-width white-text waves-effect waves-light"
          >
            UPDATE DETAILS
          </button>
        </div>
        <div class="col l6 right">
          <div class="row">
            <div class="item">
              <span>Total</span>
              <div class="input-calculated">
                <span class="bold">$180.00</span>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="item">
              <span>Calculated Total</span>
              <div class="input-calculated">
                $300.00
              </div>
            </div>
          </div>
          <div class="row">
            <div class="item">
              <span class="diff-red">Diff</span>
              <div class="input-calculated">
                <span class="diff-red">$120.00</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="control">
      <div class="input wide-input">
        <input type="text" name="filterInput" [(ngModel)]="filter" (ngModelChange)="filterChange($event)">
      </div>
      <div class="select">
        <select title="sort by" name="sort" [(ngModel)]="sort" materialize="material_select">
          <option value="A-Z">A-Z</option>
          <option value="Z-A">Z-A</option>
        </select>
      </div>
      <div class="filter">
        <a (click)="openFilterModal()">
          <fa [name]="'filter'"></fa>
          <span>Filters</span>
        </a>
      </div>
      <button
        (click)="addProduct()"
        class="right mtop uptracker-form-btn white-text waves-effect waves-light"
      >
        Add Product
      </button>
    </div>

    <div class="list is-grid-view">
      <div class="heading row">
        <div class="col s4 left-align">
          <div class="left product">
            Product
          </div>
        </div>
        <div class="col s7">
          <div class="row mrg-btm-0">
            <div class="col s2">Pkg</div>
            <div class="col s1">QTY</div>
            <div class="col s2">Pkg Price</div>
            <div class="col s3">Discount</div>
            <div class="col s2">Disc Price</div>
            <div class="col s2">Total Price</div>
          </div>
        </div>
        <div class="col s1">
        </div>
      </div>
    </div>

    <ng-container *ngFor="let product of products; let i = index">
      <div class="item row">
        <div class="table-item flex-center">
          <div class="col s4 left-align flex-center">
            <div class="input-checkbox left checkbox">
              <input
                type="checkbox"
                class="checkbox-input"
                id="selectProduct{{i}}"
                name="selectProduct{{i}}"
                [(ngModel)]="product.checked"
                (click)="productSelect(product)"
              />
              <label for="selectProduct{{i}}"></label>
            </div>
            <div class="product-pic"></div>
            <div class="left">
              <a>{{product.name}}</a>
            </div>
          </div>

          <div class="col s7">
            <div class="row mrg-btm-0 flex-center">
              <div class="col s2">
                <div class="text-left">{{product.pkgTop}}</div>
              </div>
              <div class="col s1">
                <div class="text-left">{{product.qtyTop}}</div>
              </div>
              <div class="col s2">
                <div class="text-left">{{product.pkgpTop}}</div>
              </div>
              <div class="col s3">
                <div class="text-left">{{product.dtTop}}</div>
              </div>
              <div class="col s2">
                <div>{{product.discTop}}</div>
              </div>
              <div class="col s2">
                <div>{{product.totalTop}}</div>
              </div>
            </div>
            <div class="row mrg-btm-0 flex-center">
              <div class="col s2">
                <div class="input">
                  <input class="text-left" name="PKG{{i}}" type="text" value="{{product.pkgBottom}}">
                </div>
              </div>
              <div class="col s1">
                <div class="input">
                  <input class="text-left" name="QTY{{i}}" type="text" value="{{product.qtyBottom}}">
                </div>
              </div>
              <div class="col s2">
                <div class="input">
                  <input class="text-left" name="PKGP{{i}}" type="text" value="{{product.pkgpBottom}}">
                </div>
              </div>
              <div class="col s3">
                <div class="input">
                  <input class="text-left" name="DT{{i}}" type="text" value="{{product.dtBottom}}">
                </div>
              </div>
              <div class="col s2">
                <div>{{product.discBottom}}</div>
              </div>
              <div class="col s2">
                <div>{{product.totalBottom}}</div>
              </div>
            </div>
          </div>

          <div class="col s1 flex-center justify-center trash-icon">
            <a>
              <fa name="ellipsis-h" class="tealish-text"></fa>
            </a>
          </div>
        </div>
      </div>
    </ng-container>
  </div>

  <div class="panel" [class.active]="panelVisible">
    <div class="title">Bulk Updates</div>
    <ng-container *ngFor="let product of products; let i = index">
      <div class="product-list" *ngIf="product.actualQTY != null">
        <div class="row">
          <span>Gloves Tender Touch Nirtrile Sempecare</span>
        </div>
        <div class="remove">
          <a (click)="remove(product)">Remove</a>
        </div>
      </div>
    </ng-container>
    <div class="row center">
      <button class="update" (click)="bulkUpdates()">UPDATE</button>
    </div>
    <div class="row center">
      <a class="nevermind" (click)="bulkNevermind()">Nevermind</a>
    </div>
  </div>
</form>