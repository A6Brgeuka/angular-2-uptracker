<div class="products content">
  <div class="top">
    <div class="row filter uptracker-form clearfix">
      <div class="col m12 l3 title">
        <span class="main-title">Receive Products</span>
      </div>
      <div class="col l3 m12 s12">
        <div class="select">
          <select
            [attr.disabled]="true"
            class="wide"
            materialize="material_select"
            [materializeSelectOptions]="">
            <option value="" disabled selected >{{ (orders$ | async)?.vendor?.vendor_name }}</option>
          </select>
        </div>
      </div>
      <div class="col l2 m6 s6 input wide-input">
        <input type="text"
          placeholder="Packing Slip #"
          [(ngModel)]="receiveProducts.packing_slip"
          required
          class="col s12"
        />
        <!--<div [hidden]="receiveProducts.packing_slip.valid || receiveProducts.packing_slip.pristine" class="error red-text left-align">-->
          <!--Packing slip is required-->
        <!--</div>-->
      </div>
      <div class="col m6 l2 s6 input wide-input">
        <input type="text"
          placeholder="Invoice #"
          [(ngModel)]="receiveProducts.invoice_number"
          class="col s12"
        />
      </div>
        <div class="col m3 l2 s12 right-align">
          <button
            (click)="save()"
            type="submit"
            class="uptracker-form-btn no-min-width white-text waves-effect waves-light"
          >
            <fa name="check"></fa>
            Save
          </button>
        </div>
      <div class="clearfix"></div>
    </div>
      <div class="list is-grid-view">
        <div>
          <div class="heading row">
            <div class="col s3">Status</div>
            <div class="col s1">Quantity</div>
            <div class="col s4">Inventory Group</div>
            <div class="col s3">Location</div>
            <div class="col s1"></div>
          </div>
          <div class="item row" *ngFor="let item of receiveProducts.orders">
            <div class="col s12" *ngFor="let product of item.items">
              <div class="row">
                <div class="col s3 ">
                  {{ item.po_number }}
                </div>
                <div class="col s1">
                  {{ product.quantity }}
                </div>
                <div class="col s4 tealish-text">
                  {{ product.item_name }}
                </div>
                <div class="col s4">
                  {{ product.location_name }}
                </div>
              </div>
              <div class="row" *ngFor="let status of product.status">
                <div class="col s3">
                  <div class="select custom-select select-light flex-center" *ngIf="status.showStatusSelect">
                    <select
                      materialize="material_select"
                      [materializeSelectOptions]="pastOrderService.statusList"
                      (ngModelChange)="changeStatus($event, product, status)"
                      [ngModel] = 'status.type'
                    >
                      <option [value]="statusItem.value" *ngFor="let statusItem of pastOrderService.statusList">{{ statusItem.text }}</option>
                    </select>
                  </div>
                </div>
                <div class="col s1 ">
                  <div class="input flex-center">
                    <input type="text" [value]="status.qty">
                  </div>
                </div>
                <div class="col s4">
                  <div class="select select-light flex-center"
                    >
                    <select
                      materialize="material_select"
                      [materializeSelectOptions]="inventoryGroupArr"
                      [(ngModel)] = 'product.inventory_group_id'>
                      <option value="null">N/A</option>
                      <ng-container *ngIf="status.type === 'receive' || status.type === 'partial receive' || status.type === 'quantity increase' || status.type === 'quantity decrease'">
                        <option [value]="inventoryGroup.id" *ngFor="let inventoryGroup of inventoryGroupArr">{{ inventoryGroup.name }}</option>
                      </ng-container>
                    </select>
                  </div>
                </div>
                <div class="col s3">
                  <div class="select select-light flex-center custom-select">
                    <select
                      materialize="material_select"
                      [materializeSelectOptions]="locationArr"
                      (ngModelChange)="changeLocation($event, product)"
                      [ngModel] = 'product.selectedLocation'>
                      <ng-container *ngIf="status.type === 'pending' || status.type === 'return' || status.type === 'backorder'">
                        <option value="null">N/A</option>
                      </ng-container>
                      <ng-container *ngIf="status.type === 'receive' || status.type === 'partial receive' || status.type === 'quantity increase' || status.type === 'quantity decrease'">
                        <option *ngFor="let location of locationArr" [ngValue]="location">{{ location.name }}</option>
                      </ng-container>
                    </select>
                  </div>
                </div>
                <div class="col s1 flex-center justify-center trash-icon">
                  <a (click)="remove(product, status)" *ngIf="status.type !== 'pending'">
                    <fa name="trash" class="tealish-text"></fa>
                  </a>
                </div>
              </div>
              <div class="row product-row">
                <div class="col s12">
                  <button
                    (click)="addProduct(product)"
                    type="submit"
                    class="right mtop uptracker-form-btn white-text waves-effect waves-light"
                  >
                    <fa name="plus"></fa>
                    Add Product
                  </button>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>

  </div>
</div>