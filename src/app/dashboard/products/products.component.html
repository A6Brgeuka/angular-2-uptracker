<div class="products content">
  <div class="top">
    <div class="title left">
      <div class="main-title left">Products</div>
      <div class="sub-title">{{total}} items</div>
    </div>
    <div class="filter uptracker-form clearfix">
      <div class="left">
        <div class="left input">
          <input type="text" placeholder="Keyword search" [(ngModel)]="searchKey" class="col s12" (input)="searchFilter($event)" />
        </div>
        <div class="left filter-btn">
          <a (click)="showFiltersModal()">
            <fa [name]="'filter'"></fa>
            <span>Filters</span>
          </a>
        </div>
      </div>
      <div class="right filter-right">
        <div class="left select">
          <select [(ngModel)]="sortBy" materialize="material_select" (change)="itemsSort($event)">
            <option value="">Sort by</option>
            <option value="A-Z">A-Z</option>
            <option value="Z-A">Z-A</option>
          </select>
        </div>
        <div class="left uptracker-toggle-view" (click)="toggleView()">
            <i class="fa" [class.fa-table]="!isGrid" [class.fa-th-large]="isGrid"></i>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>


    <div class="list" [class.is-grid-view]="isGrid" [class.is-tiles-view]="!isGrid">
      <div *ngIf="!isGrid">
        <div  class="item center-align" *ngFor="let product of products$ | async; let i=index">
          <div class="inner" (click)="viewProductModal(product)">
            <div class="hazardous" *ngIf="product.hazardous"><i class="material-icons">warning</i></div>
            <div class="img" [ngStyle]="{ 'background-image': 'url(' + product.images + ')' }" >
              <div class="trackable" *ngIf="product.trackable"><fa [name]="'barcode'"></fa></div>
            </div>
            <div class="info">
              <div class="ttl">{{product.name}}</div>
              <div class="bottom">
                <div class="variations left">{{product.variant_count}} Variations</div>
                <div class="price right">{{product.price_range}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="isGrid">

        <div class="heading row" >
          <div class="col s1">
          <div class="input-checkbox checkbox">
            <input
              type="checkbox"
              class="checkbox-input"
              [(ngModel)]="selectAll"
              id="selectAll"
              (click)="toggleSelectAll"
            />
            <label for="selectAll"></label>
          </div>
          </div>
          <div class="col s5">Product name</div>
          <div class="col s1">Variations</div>
          <div class="col s1">Hazardous</div>
          <div class="col s1">Trackable</div>
          <div class="col s2">Price range</div>
          <div class="col s1">
            <button class="bulk-edit uptracker-form-btn">
              <i class="fa fa-pencil"></i>
            </button>
          </div>
        </div>

        <div class="item row" *ngFor="let product of products$ | async; let i=index">
          <div class="col s1">
            <div  class="input-checkbox checkbox">
              <input
                type="checkbox"
                class="selected-input{{i}}"
                [(ngModel)]="product.selected"
                id="selected{{i}}"
              />
              <label for="selected{{i}}"></label>
            </div>
          </div>
          <div class="col s5">{{product.name}}</div>
          <div class="col s1">{{product.variant_count}}</div>
          <div class="col s1">
            <div  class="input-checkbox checkbox">
              <input
                type="checkbox"
                class="hazardous-input{{i}}"
                [(ngModel)]="product.hazardous"
                id="hazardous{{i}}"
              />
              <label for="hazardous{{i}}"></label>
            </div>
          </div>
          <div class="col s1">
            <div class="input-checkbox">
              <div  class="input-checkbox checkbox">
                <input
                  type="checkbox"
                  class="trackable-input{{i}}"
                  [(ngModel)]="product.trackable"
                  id="trackable{{i}}"
                />
                <label for="trackable{{i}}"></label>
              </div>
            </div>
          </div>
          <div class="col s2">{{product.price_range}}</div>
          <div class="col s1"></div>
        </div>

      </div>

      <div *ngIf="isRequest" class="vendor-bottom-spinner">
        <div class="cssload-loader">
          <div class="cssload-inner cssload-one"></div>
          <div class="cssload-inner cssload-two"></div>
          <div class="cssload-inner cssload-three"></div>
        </div>
      </div>

      <div class="clearfix"></div>
    </div>

    <div class="no_results_container"  [class.not_hidden]="!total">
      <div class="img">
        <i class="fa fa-question" aria-hidden="true"></i>
      </div>
      <div class="text">We could not find any products, matching the search criteria. </div>
      <div class="sub-buttons">
        <button class="uptracker-form-btn">Broaden Search</button>
        <button  (click)="requestProduct()"  class="uptracker-form-btn">Request Product</button>
      </div>
    </div>
  </div>
</div>