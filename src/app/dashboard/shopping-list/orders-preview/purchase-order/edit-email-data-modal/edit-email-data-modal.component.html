<div class="close" (click)="dismissModal()"></div>

<div class="title center-align">Send PO</div>

<button
  class="send-btn right uptracker-form-btn white-text waves-effect waves-light">
  <fa name="send-o"></fa>
  Send
</button>

<div class="inner">
  <div class="row">
    <div class="subttl col s12">To</div>
    <div class="col s12 input validate">
      <input
        placeholder="Enter Email"
        [(ngModel)]="emailTo"
        class="col s12"
        name="emailto"
        #emailto="ngModel"
        minlength="6" maxlength="254"
        type="text">
      <div [hidden]="emailto.valid || emailto.pristine" class="error red-text left-align">
        Email must be from 6 to 254 characters long and look like an e-mail address.
      </div>
    </div>

  </div>

  <div class="row">
    <div class="subttl col s12">From</div>
    <div class="col s12 input">
      <input type="text"
        placeholder="Enter Email"
        [(ngModel)]="emailFrom"
        class="col s12"
      />
    </div>
  </div>

  <div class="row">
    <div class="subttl col s12">Subject</div>
    <div class="col s12 input">
      <input type="text"
        placeholder="Enter Subject"
        [(ngModel)]="emailSubject"
        class="col s12"
      />
    </div>
  </div>

  <div class="row">
    <div class="col s12 subttl">Message</div>
    <div class="col s12  materialize-textarea">
      <textarea
        [(ngModel)]="emailMessage"
        class="col s12"
      >
      </textarea>
    </div>
  </div>
  <div class="row">
    <div class="col s12  subttl">Attachments</div>
    <div class="col s12 attachments">
      <a href="{{ apiUrl }}/po/{{ context.order_id }}/download" target="_blank">
        <fa name="file-pdf-o"></fa>
        Purchase Order #{{ context.po_number }}
        <fa class="tealish-text invis" name="external-link"></fa>
      </a>
    </div>
    <div *ngFor="let file of (file$ | async)" class="col s12 attachments">
      <a href="{{ apiUrl }}/po/{{ context.order_id }}/attachment/{{ file.id }}"  target="_blank">
        <fa *ngIf="file.type == 'application/pdf'" name="file-pdf-o"></fa>
        <fa *ngIf="file.type == 'application/zip'" name="file-zip-o"></fa>
        <fa *ngIf="(getType(file.type) == 'application')
          && (file.type != 'application/pdf')
          && (file.type != 'application/zip')"
          name="file-code-o"></fa>
        <fa *ngIf="getType(file.type) == 'image'" name="file-image-o"></fa>
        <fa *ngIf="getType(file.type) == 'text'" name="file-word-o"></fa>
        <fa *ngIf="getType(file.type) == 'audio'" name="file-audio-o"></fa>
        <fa *ngIf="getType(file.type) == 'video'" name="file-video-o"></fa>
        Attachment - {{ file.file_name }}
        <fa class="tealish-text invis" name="external-link"></fa>
      </a>
      <fa class="red-text invis" name="trash" (click)="removeFile(file)"></fa>
    </div>

    <div class="col s12 additional-space tealish-text">
      <input type="file" id="add-attachment" (change)="onFileUpload($event)">
      <label for="add-attachment" >
        <fa name="plus"></fa>
        Add Attachment
      </label>
    </div>
  </div>
</div>
