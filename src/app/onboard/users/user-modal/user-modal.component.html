<div class="close" (click)="closeModal()"></div>
<div class="title center-align">User Details</div>
<form class="uptracker-form" materialize (ngSubmit)="onSubmit()" #profileForm="ngForm" autocomplete="off" novalidate>


  <div class="col s12">
        <ul class="tabs" materialize="tabs">
          <li class="tab col s4"><a href="#profile">Profile</a></li>
          <li class="tab col s4"><a href="#permissions">Permissions</a></li>
          <li class="tab col s4"><a href="#template">Template</a></li>
        </ul>
  </div>


  <div id="profile">
    <div class="row input user-image">
      <div class="col s12 m4">
        <div class="img-container"
             fileDrop
             [ngClass]="{'file-is-over': fileIsOver}"
             [options]="options"
             (fileOver)="fileOver($event)"
             (onFileDrop)="onFileDrop($event)">
          <div class="file-field">
            <div class="upload-link">
              <input type="file" accept="image/*" (change)="changeListener($event)" />
              <a>Upload a photo</a>
            </div>
          </div>
          <div class="img" *ngIf="uploadedImage">
            <img src="{{uploadedImage}}" alt="" />
          </div>
        </div>
      </div>
      <div class="col s12 m8 input second-column">
        <div class="row">
          <div class="col s12">
            <div class="label left-align">Name</div>
            <input
                id="name"
                placeholder="Enter name here"
                class="validate col s12"
                [(ngModel)]="user.name"
                name="name"
                #name="ngModel"
                required
                type="text">
            <div [hidden]="name.valid || name.pristine" class="error red-text left-align">
              Name is required.
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12 m6">
            <div class="label left-align">Email</div>
            <input
                id="email"
                class="validate col s12"
                placeholder="username@email.com"
                [(ngModel)]="user.email"
                name="email"
                #email="ngModel"
                required minlength="6" maxlength="254" pattern=".+@.+\..+"
                type="text">
            <div [hidden]="email.valid || email.pristine" class="error red-text left-align">
              Your email must be from 6 to 254 characters long and look like an e-mail address.
            </div>
          </div>
          <div class="col s12 m6">
            <div class="label left-align">Phone number</div>
            <phone-input
                (onCountryChange)="onCountryChange($event)">
              <input
                  [textMask]="{mask: phoneMask, guide: false}"
                  id="phone"
                  placeholder="Enter a phone number"
                  class="validate col s12"
                  [(ngModel)]="profileFormPhone"
                  name="phone"
                  #phone="ngModel"
                  required minlength="11"
                  type="text">
              <div [hidden]="phone.valid || phone.pristine" class="error red-text left-align">
                Phone number required.
              </div>
            </phone-input>
          </div>
        </div>
      </div>
    </div>

    <div class="input row">
      <div class="col s12 m4">
        <div class="label left-align">Department</div>
        <div class="select" [class.dirty]="departmentDirty">
          <select
              [(ngModel)]="selectedDepartment"
              name="department"
              #department="ngModel"
              materialize="material_select"
              required
              (change)="changeDepartment()"
              [materializeSelectOptions]="selectDepartments">
            <option *ngFor="let department of departmentArr | iterable" [value]="department.value">{{department.key}}</option>
          </select>
        </div>
      </div>
      <div class="col s12 m4">
        <div class="label left-align">Default Location</div>
        <div class="select" [class.dirty]="locationDirty">
          <select
              [(ngModel)]="selectedLocation"
              name="location"
              #location="ngModel"
              materialize="material_select"
              required
              (change)="changeLocation()"
              [materializeSelectOptions]="selectLocations">
            <option *ngFor="let location of locationArr | iterable" [value]="location.key.id">{{location.key.name}}</option>
          </select>
        </div>
      </div>
      <div class="col s12 m4">
        <div class="label left-align">Tutorial Mode</div>
        <div class="switch-mode">
          <div class="switcher active" [class.active]="user.tutorial_mode" (click)="toggleTutorialMode()">On</div>
          <div class="switcher" [class.active]="!user.tutorial_mode" (click)="toggleTutorialMode()">Off</div>
        </div>
      </div>
    </div>
  </div>


  <div id="permissions">
    Perm
  </div>


  <div id="template">
    Temp
  </div>


  <div class="buttons center-align">
    <button
        type="submit"
        class="btn white-text waves-effect waves-light"
        [class.disabled]="!profileForm.form.valid"
        [disabled]="!profileForm.form.valid">
      Save
    </button>
  </div>
</form>
